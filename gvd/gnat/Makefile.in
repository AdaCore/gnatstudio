CFLAGS = -g -O2
ALL_CFLAGS=$(CFLAGS) @DEFS@ -DSYSTEM_INCLUDE=@opsysfile@

all: g-expect.o gexpect.o g-regpat.o gexpect_tty.o g-exptty.o

g-expect.o: g-expect.adb g-expect.ads
	gcc -c -gnatg $(CFLAGS) $<

gexpect.o: gexpect.c Makefile
	gcc -c $(ALL_CFLAGS) $<

g-regpat.o: g-regpat.adb g-regpat.ads
	gcc -c -gnatg $(CFLAGS) $<

g-exptty.o: g-exptty.adb g-exptty.ads g-expect.ads
	gcc -c -gnatg $(CFLAGS) g-exptty.adb

gexpect_tty.o: gexpect_tty.c systty.h Makefile
	gcc -c $(ALL_CFLAGS) $<

install:

clean:
	-$(RM) *.o
	-$(RM) *.ali
	-$(RM) *~
	-$(RM) b~*

mostlyclean: clean

distclean: mostlyclean
	-$(RM) Makefile

maintainer-clean: distclean

