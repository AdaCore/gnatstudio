prefix = @prefix@
docdir = $(prefix)/doc/gvd

MKDIR = mkdir -p
INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@

all: gvd.texi
	echo x | tex gvd.texi
	texindex gvd.cp
	tex gvd.texi
	dvips gvd.dvi -o gvd.ps
	perl texi2html -menu -monolithic gvd.texi
	makeinfo --force -o gvd.info gvd.texi
	makeinfo --force --no-headers --no-split -o gvd.txt gvd.texi
	$(MAKE) clean-temp-files

install:
	$(MKDIR) $(docdir)
	$(INSTALL_DATA) gvd.html $(docdir)
	$(INSTALL_DATA) gvd.info $(docdir)
	$(INSTALL_DATA) gvd.ps   $(docdir)
	$(INSTALL_DATA) gvd.texi $(docdir)
	$(INSTALL_DATA) gvd.txt  $(docdir)

clean-temp-files:
	-$(RM) *.aux
	-$(RM) *.cp
	-$(RM) *.cps
	-$(RM) *.dvi
	-$(RM) *.fn
	-$(RM) *.ky
	-$(RM) *.log
	-$(RM) *.pg
	-$(RM) *.toc
	-$(RM) *.tp
	-$(RM) *.vr

clean: clean-temp-files
	-$(RM) gvd.info*
	-$(RM) gvd.html gvd.ps gvd.txt

mostlyclean: clean

distclean: mostlyclean
	-$(RM) Makefile

maintainer-clean: distclean

