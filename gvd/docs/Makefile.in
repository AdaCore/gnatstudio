prefix = @prefix@
docdir = $(prefix)/doc/gvd

MKDIR = mkdir -p
INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@
IMAGES = "assembly.gif canvas.gif explorer.gif memory-view.gif tasks.gif \
breakpoints.gif colors.gif main-window.gif process.gif tooltips.gif"

all: doc clean-temp-files
doc: gvd.texi
	echo x | tex gvd.texi
	texindex gvd.cp
	tex gvd.texi
	dvips gvd.dvi -o gvd.ps
	perl texi2html -menu -monolithic gvd.texi
	makeinfo --force -o gvd.info gvd.texi
	makeinfo --force --no-headers --no-split -o gvd.txt gvd.texi

install:
	$(MKDIR) $(docdir)
	$(INSTALL_DATA) gvd.html $(docdir)
	$(INSTALL_DATA) gvd.info $(docdir)
	$(INSTALL_DATA) gvd.ps   $(docdir)
	$(INSTALL_DATA) gvd.txt  $(docdir)
	for img in $(IMAGES); do \
	  $(INSTALL_DATA) $$img $(docdir); \
	done

clean-temp-files:
	-$(RM) *.aux
	-$(RM) *.cp
	-$(RM) *.cps
	-$(RM) *.dvi
	-$(RM) *.fn
	-$(RM) *.ky
	-$(RM) *.log
	-$(RM) *.pg
	-$(RM) *.toc
	-$(RM) *.tp
	-$(RM) *.vr

clean: clean-temp-files
	-$(RM) gvd.info*
	-$(RM) gvd.html gvd.ps gvd.txt

mostlyclean: clean

distclean: mostlyclean
	-$(RM) Makefile

maintainer-clean: distclean

