@SET_MAKE@

CFLAGS = -g -O2
ALL_CFLAGS = $(CFLAGS) -gnatwu @GTK_CFLAGS@ -I../gnat
LINK_FLAGS = ../gnat/gexpect.o ../pixmaps/pixmaps.o @GTK_LIBS@

MAIN = odd_main
EXEC = odd

PKG_LIST=${wildcard *_pkg.adb}

all: $(EXEC)

stylechk:
	make ${PKG_LIST:%.adb=%.o}
	make CFLAGS="-gnaty $(CFLAGS)"

%_pkg.o: %_pkg.ads %_pkg.adb
	gcc -c $(ALL_CFLAGS) ${@:%.o=%.adb}

$(EXEC): force
	gnatmake -m $(ALL_CFLAGS) $(MAIN) -o $(EXEC) -bargs -E \
	  -largs $(LINK_FLAGS)

clean:
	rm -f *.o *.ali *~ b~* $(EXEC)

force:
