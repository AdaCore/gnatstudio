@SET_MAKE@

CFLAGS = -g -O2
ALL_CFLAGS = $(CFLAGS) -gnatwuwe @GTK_CFLAGS@ @TARGET_CFLAGS@ -I../gnat
LINK_FLAGS = ../gnat/gexpect.o ../gnat/gexpect_tty.o ../pixmaps/pixmaps.o @TARGET_LFLAGS@ @GTK_LIBS@

MAIN = gvd_main
EXEC = gvd

PKG_FILES=${wildcard *_pkg.adb}

all: $(EXEC)

stylechk: pkg_files style

style: force
	make CFLAGS="-gnaty $(CFLAGS)"

pkg_files: ${PKG_FILES}

${PKG_FILES}: force
	gcc -c $(ALL_CFLAGS) $@

$(EXEC): force
	gnatmake -m $(ALL_CFLAGS) $(MAIN) -o $(EXEC) -bargs -E \
	  -largs $(LINK_FLAGS)

clean:
	rm -f *.o *.ali *~ b~* $(EXEC)

force:
