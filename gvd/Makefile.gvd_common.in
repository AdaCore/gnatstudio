ifeq ($(GVD_COMMON_PROJECT),)
GVD_COMMON_PROJECT=True

ifeq ($(BASE_DIR),)
   include ../Makefile.common
   BASE_DIR=$(shell pwd)
   GVD_COMMON_ROOT=True
endif

GVD_COMMON_BASE_DIR := $(BASE_DIR)

BASE_DIR=$(GVD_COMMON_BASE_DIR)/../gtkada
include $(BASE_DIR)/Makefile.gtkada

GVD_COMMON_SRC_DIRS = $(GVD_COMMON_BASE_DIR)/common $(GVD_COMMON_BASE_DIR)/gnat
SRC_DIRS += $(GVD_COMMON_SRC_DIRS)
C_SRCS = \
  $(foreach name,$(GVD_COMMON_SRC_DIRS),$(notdir $(wildcard $(name)/*$(C_EXT))))
GVD_COMMON_OBJ_DIR = $(GVD_COMMON_BASE_DIR)/common/obj
OBJ_DIR = $(GVD_COMMON_OBJ_DIR)

CFLAGS = -g -O2 -DSYSTEM_INCLUDE=@opsysfile@ @DEFS@

PROJECT_FILE = gvd_common
LIBS := $(GVD_COMMON_OBJ_DIR)/libgvd_common$(AR_EXT) @TARGET_LFLAGS@ $(LIBS)

ifeq ($(GVD_COMMON_ROOT),True)
   include ../builder/src/Makefile.generic
else
   DEPS_PROJECTS += $(GVD_COMMON_BASE_DIR)/gvd_common
endif

endif
