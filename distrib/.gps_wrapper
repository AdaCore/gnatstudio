#!/bin/sh
# .gps_wrapper
#
# Copyright 2002-2006 by AdaCore

prog=`basename $0`
root=`dirname $0`

if [ "$root" = "." ]; then
   root=`pwd`
fi

# Strip 'bin' directory to retrieve the real root

root=`dirname $root`

GPS_STARTUP_LD_LIBRARY_PATH=$LD_LIBRARY_PATH
GPS_STARTUP_PATH=$PATH
export GPS_STARTUP_LD_LIBRARY_PATH GPS_STARTUP_PATH

LD_LIBRARY_PATH=$root/lib/gps:$LD_LIBRARY_PATH
GTK_DATA_PREFIX=$root
GTK_EXE_PREFIX=$root

if [ -f $root/etc/fonts/fonts.conf ]; then
  FONTCONFIG_FILE=$root/etc/fonts/fonts.conf
  export FONTCONFIG_FILE
fi

if [ -f $root/etc/pango/pangorc ]; then
  PANGO_RC_FILE=$root/etc/pango/pangorc
  export PANGO_RC_FILE
fi

if [ -f $root/etc/gtk-2.0/gdk-pixbuf.loaders ]; then
  GDK_PIXBUF_MODULE_FILE=$root/etc/gtk-2.0/gdk-pixbuf.loaders
  export GDK_PIXBUF_MODULE_FILE
fi

if [ "$CHARSET" = "" ]; then
  CHARSET=ISO-8859-1
  export CHARSET
fi

export LD_LIBRARY_PATH GTK_DATA_PREFIX GTK_EXE_PREFIX
exec $root/bin/${prog}_exe "$@"
