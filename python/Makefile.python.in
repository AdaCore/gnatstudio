ifeq ($(PYTHON_PROJECT),)
PYTHON_PROJECT=True

ifeq ($(BASE_DIR),)
   include ../Makefile.common
   BASE_DIR=$(shell pwd)
   PYTHON_ROOT=True
endif

PYTHON_BASE=@PYTHON_BASE@
PYTHON_VERSION=@PYTHON_VERSION@
PYGTK_INCLUDE=@PYGTK_INCLUDE@
PYTHON_INCLUDE=@PYTHON_CFLAGS@
PYTHON_LIBS=@PYTHON_LIBS@

PYTHON_BASE_DIR := $(BASE_DIR)

ifneq ($(PYTHON_BASE),no)
PYTHON_SRC_DIRS = $(PYTHON_BASE_DIR)/python
else
PYTHON_SRC_DIRS = $(PYTHON_BASE_DIR)/nopython
endif

ifneq ($(PYGTK_INCLUDE),)
PYGTK_MACRO=-DPYGTK
else
PYGTK_MACRO=
endif

SRC_DIRS += $(PYTHON_SRC_DIRS)
C_SRCS = \
  $(foreach name,$(PYTHON_SRC_DIRS),$(notdir $(wildcard $(name)/*$(C_EXT))))
PYTHON_OBJ_DIR = $(PYTHON_BASE_DIR)/obj
OBJ_DIR = $(PYTHON_OBJ_DIR)

CFLAGS = -g -O2 $(PYTHON_INCLUDE) ${PYGTK_MACRO} $(PYGTK_INCLUDE) `pkg-config gtk+-2.0 --cflags`

PROJECT_FILE = python

ifneq ($(PYTHON_BASE),no)
   LDFLAGS += $(PYTHON_LIBS)
   PYTHON_SRCS=$(C_SRCS)
endif

ifneq ($(strip $(PYTHON_SRCS)),)
   LIBS := $(PYTHON_OBJ_DIR)/libpython$(AR_EXT) $(LIBS)
endif

ifeq ($(PYTHON_ROOT),True)
   include ../builder/src/Makefile.generic
else
   DEPS_PROJECTS += $(PYTHON_BASE_DIR)/python
endif

endif
